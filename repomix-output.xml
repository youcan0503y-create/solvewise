This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
eslint.config.js
index.html
npm
package.json
public/apple-touch-icon.png
public/vite.svg
README.md
src/App.tsx
src/app/components/dashboard-screen.tsx
src/app/components/language-context.tsx
src/app/components/language-toggle.tsx
src/app/components/login-screen.tsx
src/app/components/solver-screen.tsx
src/app/components/ui/button.tsx
src/app/components/ui/card.tsx
src/app/components/ui/input.tsx
src/assets/react.svg
src/index.css
src/lib/firebase.ts
src/lib/gemini.ts
src/lib/storage.ts
src/lib/utils.ts
src/main.tsx
tsconfig.app.json
tsconfig.json
tsconfig.node.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="npm">

</file>

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="README.md">
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
</file>

<file path="src/app/components/ui/button.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "@/lib/utils";

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    );
  }
);
Button.displayName = "Button";

export { Button, buttonVariants };
</file>

<file path="src/app/components/ui/card.tsx">
import * as React from "react";
import { cn } from "@/lib/utils";

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
));
Card.displayName = "Card";

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
));
CardHeader.displayName = "CardHeader";

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
));
CardTitle.displayName = "CardTitle";

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
));
CardDescription.displayName = "CardDescription";

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
));
CardContent.displayName = "CardContent";

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
));
CardFooter.displayName = "CardFooter";

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
</file>

<file path="src/app/components/ui/input.tsx">
import * as React from "react";
import { cn } from "@/lib/utils";

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<"input">>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-9 w-full rounded-xl border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        )}
        ref={ref}
        {...props}
      />
    );
  }
);
Input.displayName = "Input";

export { Input };
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/index.css">
@import "tailwindcss";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

:root {
  --background: 240 10% 98%; /* #fafbfc */
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 217 91% 60%; /* #3b82f6 */
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 213 94% 68%; /* #60a5fa */
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 5.9% 10%;
  --radius: 1.25rem;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
}

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
</file>

<file path="src/lib/firebase.ts">
import { initializeApp } from "firebase/app";
import { getAuth, GoogleAuthProvider, GithubAuthProvider } from "firebase/auth";

// ğŸŸ¢ ì‚¬ìš©ìê°€ ì œê³µí•œ Firebase ì„¤ì •ê°’
const firebaseConfig = {
  apiKey: "AIzaSyAjU8ccayAO9FbgymwPlpNJNZ_csliw7WA",
  authDomain: "solvewise-a6e5a.firebaseapp.com",
  projectId: "solvewise-a6e5a",
  storageBucket: "solvewise-a6e5a.firebasestorage.app",
  messagingSenderId: "994060844717",
  appId: "1:994060844717:web:7fc1c78060646221125024"
};

// 1. Firebase ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);

// 2. ì¸ì¦ ì„œë¹„ìŠ¤(Auth) ê°€ì ¸ì˜¤ê¸°
export const auth = getAuth(app);

// 3. ë¡œê·¸ì¸ ì œê³µì—…ì²´(Provider) ì„¤ì •
export const googleProvider = new GoogleAuthProvider();
export const githubProvider = new GithubAuthProvider();

// ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ëœ ì•± ë‚´ë³´ë‚´ê¸° (í•„ìš” ì‹œ)
export default app;
</file>

<file path="src/lib/gemini.ts">
// ğŸŸ¢ [ìˆ˜ì •ë¨] í…ìŠ¤íŠ¸ í’€ì´ ì „ìš© í”„ë¡¬í”„íŠ¸
export const INITIAL_PROMPT = `
ë‹¹ì‹ ì€ ê²½ì œí•™ íŠœí„°ì´ì í”„ë¡œê·¸ë˜ë¨¸ì…ë‹ˆë‹¤.
ì œê³µëœ ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ **[ì¶œë ¥ í˜•ì‹]**ì— ë§ì¶° í•œêµ­ì–´ë¡œ ë‹µë³€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

**[ì¶œë ¥ í˜•ì‹]**

**1. ë¬¸ì œ ìœ í˜•**
(ì˜ˆ: ë¯¸ì‹œê²½ì œí•™ ì†Œë¹„ìì´ë¡ )

**2. ì‚¬ìš©ëœ ê°œë…**
(í•µì‹¬ ê°œë…ë“¤ì„ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ë‚˜ì—´í•˜ì„¸ìš”. ì˜ˆ: ë…ì ê¸°ì—…, ì´ìœ¤ê·¹ëŒ€í™”, í•œê³„ë¹„ìš©)

**3. ë¬¸ì œ ì§ˆë¬¸ í…ìŠ¤íŠ¸ ë¶„ì„**
(ì´ë¯¸ì§€ì˜ ì§€ë¬¸ê³¼ ì¡°ê±´ì„ í…ìŠ¤íŠ¸ë¡œ ì •ë¦¬)

**4. ë¬¸ì œ í’€ì´ ê³¼ì •**
- **ë°˜ë“œì‹œ ê° ë‹¨ê³„ë¥¼ '### ë‹¨ê³„ N: [í•µì‹¬ ë‚´ìš©]' í˜•ì‹ì˜ ì œëª©ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”.** (ì˜ˆ: ### ë‹¨ê³„ 1: ì´ìœ¤í•¨ìˆ˜ ì„¤ì •)
- ì„¤ëª… í…ìŠ¤íŠ¸ì™€ ìˆ˜ì‹ì€ **ë°˜ë“œì‹œ ì¤„ë°”ê¿ˆ**ìœ¼ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”.
- ê³„ì‚° ì‹ì´ë‚˜ ì¤‘ìš”í•œ ìˆ˜ì‹ì€ ë¬¸ì¥ ì¤‘ê°„ì— ë„£ì§€ ë§ê³ , **ë°˜ë“œì‹œ ë³„ë„ì˜ ì¤„ì— $$ ... $$ (Display Math) í˜•ì‹ì„ ì‚¬ìš©**í•˜ì—¬ ì‘ì„±í•˜ì„¸ìš”.
- **ê°€ë…ì„±ì„ ìœ„í•´ ì¤„ê¸€ì„ ê¸¸ê²Œ ì“°ì§€ ë§ê³ , ë¬¸ì¥ì„ ëŠì–´ì„œ ì‘ì„±í•˜ì„¸ìš”.**

**5. ìµœì¢… ì •ë‹µ**
(ìµœì¢… ë„ì¶œëœ ì •ë‹µë§Œ ê°„ê²°í•˜ê²Œ ì‘ì„±)

**ì£¼ì˜ì‚¬í•­**: ì´ ë‹¨ê³„ì—ì„œëŠ” ì‹œê°í™”(ê·¸ë˜í”„) ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”. í…ìŠ¤íŠ¸ í’€ì´ì—ë§Œ ì§‘ì¤‘í•˜ì„¸ìš”.
`;

// ğŸŸ¢ [ìˆ˜ì •ë¨] ê·¸ë˜í”„ ìƒì„± ì „ìš© í”„ë¡¬í”„íŠ¸ (í•œêµ­ì–´ ê°•ì œ ë° ê²¹ì¹¨ ë°©ì§€ ì¶”ê°€)
export const GRAPH_PROMPT = `
ìœ„ ë¬¸ì œì˜ ìƒí™©ì„ ì‹œê°í™”í•˜ê¸° ìœ„í•œ **Plotly.js ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ**ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
ì´ì „ ëŒ€í™” ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì •í™•í•œ ìˆ˜ì¹˜ì™€ ê³¡ì„ ì„ ê·¸ë¦¬ì„¸ìš”.

**[ì¤‘ìš”] ê·¸ë˜í”„ ì„¤ì •**: 
1. ë°˜ë“œì‹œ \`Plotly.newPlot('chart', ...)\`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. (IDëŠ” 'chart'ì—¬ì•¼ í•¨)
2. layout ë³€ìˆ˜ì˜ xaxisì™€ yaxisì— \`fixedrange: true\`ë¥¼ ì¶”ê°€í•˜ì—¬ ì¤Œ/ì´ë™ì„ ë§‰ìœ¼ì„¸ìš”.
3. \`{displayModeBar: false}\` ì˜µì…˜ì„ ì¶”ê°€í•˜ì„¸ìš”.
4. ë°ì´í„° ë°°ì—´ ë³€ìˆ˜ëª…ì€ \`data\`, ë ˆì´ì•„ì›ƒ ë³€ìˆ˜ëª…ì€ \`layout\`ìœ¼ë¡œ í•˜ì„¸ìš”.
5. ì½”ë“œëŠ” ë°˜ë“œì‹œ \`\`\`javascript ... \`\`\` ë¸”ë¡ìœ¼ë¡œ ê°ì‹¸ì£¼ì„¸ìš”.
6. ì„¤ëª… ì—†ì´ **ì½”ë“œë§Œ** ì‘ì„±í•˜ì„¸ìš”.

**[ë””ìì¸ ë° ì–¸ì–´ ì„¤ì • - í•„ìˆ˜]**:
7. **ê·¸ë˜í”„ì˜ ì œëª©, ì¶• ë ˆì´ë¸”, ë²”ë¡€, ì£¼ì„(Annotation) ë“± ëª¨ë“  í…ìŠ¤íŠ¸ëŠ” ë°˜ë“œì‹œ 'í•œêµ­ì–´'ë¡œ ì‘ì„±í•˜ì„¸ìš”.**
8. **í…ìŠ¤íŠ¸ ê²¹ì¹¨ ë°©ì§€**: ì£¼ì„(Annotation)ì´ ì„ ì´ë‚˜ ë‹¤ë¥¸ í…ìŠ¤íŠ¸ì™€ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ìœ„ì¹˜(x, y, ax, ay)ë¥¼ ì‹ ì¤‘í•˜ê²Œ ì¡°ì •í•˜ì„¸ìš”. 
9. ë°°ê²½ìƒ‰ì€ í°ìƒ‰, ê¸€ììƒ‰ì€ ì§„í•œ íšŒìƒ‰ì„ ì‚¬ìš©í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.
`;

export async function resizeImage(file: File, maxSide: number = 800): Promise<string> {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = (e) => {
      const img = new Image();
      img.onload = () => {
        const canvas = document.createElement("canvas");
        let width = img.width;
        let height = img.height;

        if (width > maxSide || height > maxSide) {
          if (width > height) {
            height = Math.floor(height * (maxSide / width));
            width = maxSide;
          } else {
            width = Math.floor(width * (maxSide / height));
            height = maxSide;
          }
        }

        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext("2d");
        ctx?.drawImage(img, 0, 0, width, height);
        
        const dataUrl = canvas.toDataURL("image/jpeg", 0.7);
        resolve(dataUrl.split(",")[1]);
      };
      img.src = e.target?.result as string;
    };
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

// ğŸŸ¢ [ì™„ì „ ë™ì  ë¡œì§] í•˜ë“œì½”ë”© ì—†ì´ APIì—ì„œ ë°›ì•„ì˜¨ ì •ë³´ë§Œìœ¼ë¡œ ìˆœìœ„ë¥¼ ë§¤ê¹ë‹ˆë‹¤.
async function getSortedModels(apiKey: string): Promise<string[]> {
  try {
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`
    );
    const data = await response.json();
    
    if (!data.models) return [];

    const capableModels = data.models.filter((m: any) => 
      m.supportedGenerationMethods.includes("generateContent") &&
      m.name.toLowerCase().includes("gemini")
    );

    capableModels.sort((a: any, b: any) => {
      const nameA = a.name.toLowerCase();
      const nameB = b.name.toLowerCase();

      const getVersion = (name: string) => {
        const match = name.match(/gemini-(\d+(\.\d+)?)/);
        return match ? parseFloat(match[1]) : 0; 
      };

      const verA = getVersion(nameA);
      const verB = getVersion(nameB);

      if (verA !== verB) return verB - verA;

      const getTierScore = (name: string) => {
        if (name.includes("ultra")) return 4;
        if (name.includes("pro")) return 3;
        if (name.includes("flash")) return 2;
        if (name.includes("nano")) return 1;
        return 0;
      };

      return getTierScore(nameB) - getTierScore(nameA);
    });

    return capableModels.map((m: any) => m.name);

  } catch (e) {
    console.error("Model fetch error:", e);
    return ["models/gemini-pro"]; 
  }
}

// í˜„ì¬ ì‚¬ìš©ë  ìµœì ì˜ ëª¨ë¸ ì´ë¦„ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
export async function checkCurrentModel(apiKey: string): Promise<string> {
  const models = await getSortedModels(apiKey);
  if (models.length > 0) {
    const rawName = models[0].replace("models/", "");
    return rawName
      .split("-")
      .map(word => word.charAt(0).toUpperCase() + word.slice(1))
      .join(" ");
  }
  return "Unknown Model";
}

export async function callGemini(apiKey: string, prompt: string, base64Image: string | null) {
  const modelList = await getSortedModels(apiKey);
  
  if (modelList.length === 0) {
    throw new Error("ì‚¬ìš© ê°€ëŠ¥í•œ AI ëª¨ë¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
  }

  let lastError = null;

  for (const modelName of modelList) {
    try {
      console.log(`Attempting with model: ${modelName}`);
      
      const url = `https://generativelanguage.googleapis.com/v1beta/${modelName}:generateContent?key=${apiKey}`;

      const parts: any[] = [{ text: prompt }];
      if (base64Image) {
        parts.push({
          inline_data: { mime_type: "image/jpeg", data: base64Image }
        });
      }

      const body = { contents: [{ parts }] };

      const response = await fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body),
      });

      const json = await response.json();

      if (json.error) {
        throw new Error(json.error.message);
      }
      
      if (!json.candidates || json.candidates.length === 0) {
        throw new Error("AI ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
      }

      const text = json.candidates[0].content.parts[0].text;
      const codeMatch = text.match(/```javascript([\s\S]*?)```/);
      let graphCode = "";
      let explanation = text;

      if (codeMatch) {
        graphCode = codeMatch[1].trim();
        graphCode = graphCode.replace(/Plotly\.newPlot\(['"](.*?)['"]/, "Plotly.newPlot('chart'");
        explanation = text.replace(codeMatch[0], "");
      }

      return { explanation, graphCode };

    } catch (error: any) {
      console.warn(`Failed with ${modelName}:`, error.message);
      lastError = error;
      continue;
    }
  }

  throw new Error(`ëª¨ë“  ëª¨ë¸ ì‹œë„ ì‹¤íŒ¨. ë§ˆì§€ë§‰ ì˜¤ë¥˜: ${lastError?.message}`);
}
</file>

<file path="src/lib/storage.ts">
export interface HistoryItem {
  id: string;
  type: "text" | "image";
  question: string;
  answer: string;
  graphCode?: string;
  timestamp: number;
  previewImage?: string; // ì¸ë„¤ì¼ìš© Base64 ì´ë¯¸ì§€
}

export const Storage = {
  // API í‚¤ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
  getApiKey: () => localStorage.getItem("solvewise_api_key"),
  setApiKey: (key: string) => localStorage.setItem("solvewise_api_key", key),
  
  // íˆìŠ¤í† ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
  getHistory: (): HistoryItem[] => {
    const data = localStorage.getItem("solvewise_history");
    return data ? JSON.parse(data) : [];
  },
  
  // íˆìŠ¤í† ë¦¬ ì¶”ê°€í•˜ê¸° (ìµœëŒ€ 20ê°œê¹Œì§€ë§Œ ì €ì¥)
  addHistory: (item: HistoryItem) => {
    const history = Storage.getHistory();
    const newHistory = [item, ...history].slice(0, 20); 
    localStorage.setItem("solvewise_history", JSON.stringify(newHistory));
  }
};
</file>

<file path="src/lib/utils.ts">
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="src/main.tsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import App from './App.tsx' // ë§Œì•½ App.tsxê°€ src/app ì•ˆì— ìˆë‹¤ë©´ ê²½ë¡œ ìˆ˜ì • í•„ìš”
import './index.css'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    /* ğŸŸ¢ ì—¬ê¸°ì— ì¶”ê°€ëœ ì„¤ì •ì…ë‹ˆë‹¤ (ê²½ë¡œ ë³„ì¹­) */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>solvewise</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="src/App.tsx">
import { useState, useEffect } from "react";
import { LanguageProvider } from "@/app/components/language-context";
import { LoginScreen } from "@/app/components/login-screen";
import { DashboardScreen } from "@/app/components/dashboard-screen";
import { SolverScreen } from "@/app/components/solver-screen";
import { Storage, HistoryItem } from "@/lib/storage"; // HistoryItem íƒ€ì… ì„í¬íŠ¸
import { AnimatePresence, motion } from "motion/react";

type Screen = "login" | "dashboard" | "solver";

export default function App() {
  const [currentScreen, setCurrentScreen] = useState<Screen>("login");
  const [selectedHistory, setSelectedHistory] = useState<HistoryItem | null>(null); // ğŸŸ¢ ì„ íƒëœ ê¸°ë¡ ìƒíƒœ

  useEffect(() => {
    const apiKey = Storage.getApiKey();
    if (apiKey) {
      setCurrentScreen("dashboard");
    }
  }, []);

  // ğŸŸ¢ ëŒ€ì‹œë³´ë“œ -> ì†”ë²„ ì´ë™ í•¸ë“¤ëŸ¬ (ìƒˆ ì§ˆë¬¸ or ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°)
  const handleNavigateToSolver = (item?: HistoryItem) => {
    setSelectedHistory(item || null); // ì•„ì´í…œì´ ìˆìœ¼ë©´ ì €ì¥, ì—†ìœ¼ë©´ null (ìƒˆ ì§ˆë¬¸)
    setCurrentScreen("solver");
  };

  const pageVariants = {
    initial: { opacity: 0, y: 20, scale: 0.98 },
    in: { opacity: 1, y: 0, scale: 1, transition: { type: "spring", stiffness: 300, damping: 30, mass: 1 } },
    out: { opacity: 0, y: -20, scale: 0.98, transition: { duration: 0.2, ease: "easeInOut" } },
  };

  return (
    <LanguageProvider>
      <div className="min-h-screen bg-background text-foreground font-sans antialiased overflow-hidden">
        <AnimatePresence mode="wait">
          {currentScreen === "login" && (
            <motion.div
              key="login"
              variants={pageVariants}
              initial="initial"
              animate="in"
              exit="out"
              className="w-full h-full"
            >
              <LoginScreen onLogin={() => setCurrentScreen("dashboard")} />
            </motion.div>
          )}

          {currentScreen === "dashboard" && (
            <motion.div
              key="dashboard"
              variants={pageVariants}
              initial="initial"
              animate="in"
              exit="out"
              className="w-full h-full"
            >
              {/* ğŸŸ¢ ìˆ˜ì •ë¨: onNavigate ì „ë‹¬ */}
              <DashboardScreen onNavigate={handleNavigateToSolver} />
            </motion.div>
          )}

          {currentScreen === "solver" && (
            <motion.div
              key="solver"
              variants={pageVariants}
              initial="initial"
              animate="in"
              exit="out"
              className="w-full h-full"
            >
              {/* ğŸŸ¢ ìˆ˜ì •ë¨: initialHistory ì „ë‹¬ */}
              <SolverScreen 
                onBack={() => setCurrentScreen("dashboard")} 
                initialHistory={selectedHistory}
              />
            </motion.div>
          )}
        </AnimatePresence>
      </div>
    </LanguageProvider>
  );
}
</file>

<file path="src/app/components/language-context.tsx">
import { createContext, useContext, useState, ReactNode } from "react";

type Language = "ko" | "en";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations = {
  ko: {
    // --- ë¡œê·¸ì¸ í™”ë©´ ---
    "login.title": "SolveWise",
    "login.subtitle": "AI ìˆ˜í•™ & ê²½ì œí•™ í’€ì´",
    "login.google": "Googleë¡œ ê³„ì†í•˜ê¸°",
    "login.github": "GitHubë¡œ ê³„ì†í•˜ê¸°",
    "login.or": "ë˜ëŠ”",
    "login.email": "ì´ë©”ì¼ë¡œ ê³„ì†í•˜ê¸°",
    "login.terms": "ê³„ì† ì§„í–‰í•˜ì‹œë©´ ",
    "login.terms.link1": "ì´ìš©ì•½ê´€",
    "login.terms.and": " ë° ",
    "login.terms.link2": "ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨",
    "login.terms.agree": "ì— ë™ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤",
    "login.success": "ë¡œê·¸ì¸ ì„±ê³µ!",
    "login.email_error": "ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
    "login.api_key_header": "API Key ì…ë ¥",
    "login.api_key_desc": "ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´ í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
    "login.start": "ì‹œì‘í•˜ê¸°",

    // --- ëŒ€ì‹œë³´ë“œ í™”ë©´ ---
    "dashboard.title": "ê¸°ë¡",
    "dashboard.subtitle": "ì´ì „ ì§ˆë¬¸ë“¤",
    "dashboard.no_history": "ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.",
    "dashboard.start_prompt": "ìš°ì¸¡ í•˜ë‹¨ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì§ˆë¬¸ì„ ì‹œì‘í•´ë³´ì„¸ìš”!",
    "dashboard.image_question": "ì´ë¯¸ì§€ ë¶„ì„ ì§ˆë¬¸",
    "dashboard.text_question": "í…ìŠ¤íŠ¸ ì§ˆë¬¸",
    "dashboard.settings_language": "ì–¸ì–´ ì„¤ì •",
    "dashboard.logout": "ë¡œê·¸ì•„ì›ƒ",
    "dashboard.delete_account": "íšŒì› íƒˆí‡´",
    "dashboard.delete_confirm": "ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    "dashboard.deleted": "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",
    "dashboard.logout_confirm": "ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    "dashboard.account_delete_confirm": "ì •ë§ë¡œ ê³„ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë©° ëª¨ë“  ë°ì´í„°ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.",
    "dashboard.account_deleted": "ê³„ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",

    // --- ì†”ë²„ í™”ë©´ ---
    "solver.title": "ìƒˆ ì§ˆë¬¸",
    "solver.subtitle": "ìˆ˜í•™ì´ë‚˜ ê²½ì œí•™ì— ëŒ€í•´ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”",
    "solver.placeholder": "ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...",
    "solver.upload": "ì‚¬ì§„ ì—…ë¡œë“œ",
    "solver.solve": "í’€ì´ ì‹œì‘",
    "solver.solving": "ë¶„ì„ì¤‘",
    "solver.solution": "AI í’€ì´",
    "solver.graph_view": "ê·¸ë˜í”„ ë³´ê¸°",
    "solver.graph_hide": "ê·¸ë˜í”„ ìˆ¨ê¸°ê¸°",
    "solver.graph_create": "ì‹œê°í™” ì½”ë“œ ìƒì„±",
    "solver.graph_creating": "ìƒì„± ì¤‘...",
    "solver.graph_success": "ê·¸ë˜í”„ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!",
    "solver.graph_error": "ê·¸ë˜í”„ ì½”ë“œë¥¼ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",
    "solver.add_question": "ì¶”ê°€ ì§ˆë¬¸í•˜ê¸°",
    "solver.error_no_key": "API Keyê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.",
    "solver.error_empty": "ì§ˆë¬¸ì´ë‚˜ ì´ë¯¸ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
    "solver.analyzing": "AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...",
  },
  en: {
    // --- Login Screen ---
    "login.title": "SolveWise",
    "login.subtitle": "AI Math & Economics Solver",
    "login.google": "Continue with Google",
    "login.github": "Continue with GitHub",
    "login.or": "or",
    "login.email": "Continue with Email",
    "login.terms": "By continuing, you agree to our ",
    "login.terms.link1": "Terms",
    "login.terms.and": " and ",
    "login.terms.link2": "Privacy Policy",
    "login.terms.agree": ".",
    "login.success": "Login Success!",
    "login.email_error": "Please enter email and password.",
    "login.api_key_header": "Enter API Key",
    "login.api_key_desc": "Please enter your API Key to start.",
    "login.start": "Start",

    // --- Dashboard Screen ---
    "dashboard.title": "History",
    "dashboard.subtitle": "Your previous questions",
    "dashboard.no_history": "No history yet.",
    "dashboard.start_prompt": "Tap the button below to start!",
    "dashboard.image_question": "Image Question",
    "dashboard.text_question": "Text Question",
    "dashboard.settings_language": "Language",
    "dashboard.logout": "Log out",
    "dashboard.delete_account": "Delete Account",
    "dashboard.delete_confirm": "Are you sure you want to delete this?",
    "dashboard.deleted": "Deleted successfully.",
    "dashboard.logout_confirm": "Are you sure you want to log out?",
    "dashboard.account_delete_confirm": "Are you sure you want to delete your account?\nThis action cannot be undone.",
    "dashboard.account_deleted": "Account deleted successfully.",

    // --- Solver Screen ---
    "solver.title": "New Question",
    "solver.subtitle": "Ask anything about math or economics",
    "solver.placeholder": "Type your question here...",
    "solver.upload": "Upload",
    "solver.solve": "Solve",
    "solver.solving": "Analyzing",
    "solver.solution": "Solution",
    "solver.graph_view": "View Graph",
    "solver.graph_hide": "Hide Graph",
    "solver.graph_create": "Generate Graph",
    "solver.graph_creating": "Generating...",
    "solver.graph_success": "Graph generated!",
    "solver.graph_error": "Failed to generate graph code.",
    "solver.add_question": "Ask follow-up",
    "solver.error_no_key": "No API Key found. Please log in again.",
    "solver.error_empty": "Please enter a question or image.",
    "solver.analyzing": "AI is analyzing...",
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguage] = useState<Language>("ko");

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations.ko] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
}
</file>

<file path="src/app/components/language-toggle.tsx">
import { motion } from "motion/react";
import { useLanguage } from "@/app/components/language-context";

export function LanguageToggle() {
  const { language, setLanguage } = useLanguage();

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      // ğŸŸ¢ ìˆ˜ì •ë¨: w-full ë° grid-cols-2 ì ìš©
      className="grid grid-cols-2 gap-1 w-full bg-gray-100/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-1 border border-gray-200 dark:border-gray-700 shadow-inner"
    >
      <button
        onClick={() => setLanguage("ko")}
        className={`w-full py-1.5 rounded-lg text-xs font-semibold transition-all flex items-center justify-center ${
          language === "ko"
            ? "bg-white text-primary shadow-sm ring-1 ring-black/5"
            : "text-gray-500 hover:text-gray-900 dark:hover:text-gray-300"
        }`}
      >
        í•œêµ­ì–´
      </button>
      <button
        onClick={() => setLanguage("en")}
        className={`w-full py-1.5 rounded-lg text-xs font-semibold transition-all flex items-center justify-center ${
          language === "en"
            ? "bg-white text-primary shadow-sm ring-1 ring-black/5"
            : "text-gray-500 hover:text-gray-900 dark:hover:text-gray-300"
        }`}
      >
        English
      </button>
    </motion.div>
  );
}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import path from 'path'
import tailwindcss from '@tailwindcss/vite'
import react from '@vitejs/plugin-react'
import { VitePWA } from 'vite-plugin-pwa'

export default defineConfig({
  plugins: [
    react(),
    tailwindcss(),
    VitePWA({
      registerType: 'autoUpdate',
      includeAssets: ['apple-touch-icon.png'],
      manifest: {
        name: 'SolveWise',
        short_name: 'SolveWise',
        description: 'AI ìˆ˜í•™ & ê²½ì œí•™ í’€ì´',
        theme_color: '#ffffff',
        background_color: '#ffffff',
        display: 'standalone', // ğŸŸ¢ ì£¼ì†Œì°½ì„ ì—†ì• ì£¼ëŠ” í•µì‹¬ ì„¤ì •
        orientation: 'portrait',
        icons: [
          {
            src: 'apple-touch-icon.png',
            sizes: '180x180',
            type: 'image/png'
          },
          {
            src: 'apple-touch-icon.png', // ì•ˆë“œë¡œì´ë“œ í˜¸í™˜ì„ ìœ„í•´ ê°™ì€ íŒŒì¼ì„ í° ì‚¬ì´ì¦ˆë¡œë„ ë“±ë¡
            sizes: '512x512',
            type: 'image/png',
            purpose: 'any maskable'
          }
        ]
      }
    })
  ],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
</file>

<file path="package.json">
{
  "name": "solvewise",
  "private": true,
  "version": "0.0.1",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-slot": "^1.1.2",
    "@radix-ui/react-toggle": "^1.1.2",
    "@radix-ui/react-toggle-group": "^1.1.2",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "firebase": "^12.8.0",
    "katex": "^0.16.9",
    "lucide-react": "^0.487.0",
    "motion": "^12.0.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-markdown": "^9.0.1",
    "rehype-katex": "^7.0.0",
    "remark-math": "^6.0.0",
    "sonner": "^1.5.0",
    "tailwind-merge": "^2.5.2",
    "tailwindcss-animate": "^1.0.7",
    "vite-plugin-pwa": "^1.2.0"
  },
  "devDependencies": {
    "@tailwindcss/vite": "^4.0.0",
    "@types/node": "^22.5.0",
    "@types/react": "^18.3.3",
    "@types/react-dom": "^18.3.0",
    "@vitejs/plugin-react": "^4.3.1",
    "autoprefixer": "^10.4.20",
    "tailwindcss": "^4.0.0",
    "typescript": "^5.5.3",
    "vite": "^5.4.1"
  }
}
</file>

<file path="src/app/components/dashboard-screen.tsx">
import { useEffect, useState, useRef } from "react";
import { motion, AnimatePresence } from "motion/react";
import { Plus, Clock, Image as ImageIcon, Type, ChevronRight, Trash2, Sparkles, LogOut, Cpu, UserX, Settings } from "lucide-react";
import { useLanguage } from "@/app/components/language-context";
import { LanguageToggle } from "@/app/components/language-toggle";
import { Storage, HistoryItem } from "@/lib/storage";
import { checkCurrentModel } from "@/lib/gemini";
import { formatDistanceToNow } from "date-fns";
import { ko, enUS } from "date-fns/locale";
import { Toaster, toast } from "sonner";
import { auth } from "@/lib/firebase";
import { deleteUser } from "firebase/auth";

interface DashboardScreenProps {
  onNavigate: (item?: HistoryItem) => void;
}

export function DashboardScreen({ onNavigate }: DashboardScreenProps) {
  const { language, t } = useLanguage();
  const [history, setHistory] = useState<HistoryItem[]>([]);
  const [currentModel, setCurrentModel] = useState<string>("Checking...");
  const [isSettingsOpen, setIsSettingsOpen] = useState(false);

  const menuRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    setHistory(Storage.getHistory());

    const apiKey = Storage.getApiKey();
    if (apiKey) {
      checkCurrentModel(apiKey).then(modelName => {
        setCurrentModel(modelName);
      });
    }

    const handleClickOutside = (event: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
        setIsSettingsOpen(false);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  const handleDelete = (e: React.MouseEvent, id: string) => {
    e.stopPropagation();
    if (confirm(t("dashboard.delete_confirm"))) {
      const newHistory = history.filter(item => item.id !== id);
      setHistory(newHistory);
      localStorage.setItem("solvewise_history", JSON.stringify(newHistory));
      toast.success(t("dashboard.deleted"));
    }
  };

  const handleLogout = () => {
    if (confirm(t("dashboard.logout_confirm"))) {
      localStorage.removeItem("solvewise_api_key");
      auth.signOut();
      window.location.reload();
    }
  };

  const handleDeleteAccount = async () => {
    if (!auth.currentUser) {
      toast.error("Error: No user");
      return;
    }
    if (!confirm(t("dashboard.account_delete_confirm"))) {
      return;
    }
    try {
      await deleteUser(auth.currentUser);
      localStorage.clear();
      toast.success(t("dashboard.account_deleted"));
      setTimeout(() => {
        window.location.reload();
      }, 1000);
    } catch (error: any) {
      console.error(error);
      if (error.code === 'auth/requires-recent-login') {
        toast.error("Please log in again to delete your account.");
      } else {
        toast.error("Error: " + error.message);
      }
    }
  };
  
  return (
    <div className="min-h-screen pb-24 bg-[#fafbfc] dark:bg-[#030213]">
      <Toaster position="top-center" />
      
      <motion.div
        initial={{ opacity: 0, y: -20 }}
        animate={{ opacity: 1, y: 0 }}
        className="sticky top-0 z-10 backdrop-blur-xl bg-white/70 dark:bg-black/70 border-b border-gray-200/50 dark:border-gray-800/50 px-6 py-4"
      >
        <div className="max-w-2xl mx-auto flex items-center justify-between relative">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 rounded-[14px] bg-gradient-to-br from-primary to-accent shadow-md flex items-center justify-center">
              <Sparkles className="w-5 h-5 text-white" />
            </div>
            <div>
              <h2 className="tracking-tight font-bold text-gray-900 dark:text-white">{t("dashboard.title")}</h2>
              <p className="text-xs text-muted-foreground">{t("dashboard.subtitle")}</p>
            </div>
          </div>
          
          <div className="flex items-center gap-3" ref={menuRef}>
            <div className="hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-xl text-xs font-bold border border-emerald-200 dark:border-emerald-800 transition-all">
              <Cpu className="w-3.5 h-3.5" />
              <span>{currentModel}</span>
            </div>

            <div className="relative">
              <button
                onClick={() => setIsSettingsOpen(!isSettingsOpen)}
                className="p-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm z-50 relative overflow-hidden"
              >
                <motion.div
                  animate={{ rotate: isSettingsOpen ? 180 : 0 }}
                  transition={{ duration: 0.3, ease: "easeInOut" }}
                >
                  <Settings className="w-5 h-5" />
                </motion.div>
              </button>

              <AnimatePresence>
                {isSettingsOpen && (
                  <motion.div
                    initial={{ opacity: 0, y: -10, scale: 0.95 }}
                    animate={{ opacity: 1, y: 0, scale: 1 }}
                    exit={{ opacity: 0, y: -10, scale: 0.95 }}
                    transition={{ duration: 0.2, ease: "easeInOut" }}
                    className="absolute right-0 top-14 w-64 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-2xl border border-gray-200 dark:border-gray-700 shadow-xl overflow-hidden z-40 p-2 flex flex-col gap-1"
                  >
                    <div className="sm:hidden flex items-center gap-2 px-3 py-2 text-xs text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl mb-1">
                      <Cpu className="w-3.5 h-3.5" />
                      <span className="font-semibold truncate">{currentModel}</span>
                    </div>

                    <div className="px-3 py-2">
                      <p className="text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wider">{t("dashboard.settings_language")}</p>
                      <LanguageToggle />
                    </div>

                    <div className="h-px bg-gray-100 dark:bg-gray-800 my-1" />

                    <button
                      onClick={handleLogout}
                      className="w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                    >
                      <LogOut className="w-4 h-4" />
                      {t("dashboard.logout")}
                    </button>

                    <button
                      onClick={handleDeleteAccount}
                      className="w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"
                    >
                      <UserX className="w-4 h-4" />
                      {t("dashboard.delete_account")}
                    </button>
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
          </div>
        </div>
      </motion.div>

      <div className="max-w-2xl mx-auto px-6 pt-6 space-y-4">
        {history.length === 0 ? (
          <motion.div 
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="text-center py-20 text-muted-foreground"
          >
            <div className="w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4">
              <Sparkles className="w-8 h-8 text-gray-400" />
            </div>
            <p className="text-lg font-medium text-gray-600 dark:text-gray-400">{t("dashboard.no_history")}</p>
            <p className="text-sm mt-1">{t("dashboard.start_prompt")}</p>
          </motion.div>
        ) : (
          <AnimatePresence>
            {history.map((item, index) => (
              <motion.div
                key={item.id}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0, scale: 0.95 }}
                transition={{ delay: index * 0.05 }}
                whileHover={{ scale: 1.01, y: -2 }}
                whileTap={{ scale: 0.99 }}
                className="group cursor-pointer relative"
                onClick={() => onNavigate(item)} 
              >
                <div className="bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm rounded-[24px] p-5 border border-white/50 dark:border-gray-800 shadow-sm hover:shadow-md transition-all">
                  <div className="flex items-start gap-4">
                    <div className={`w-12 h-12 rounded-[16px] flex items-center justify-center flex-shrink-0 ${
                      item.type === "image" 
                        ? "bg-gradient-to-br from-purple-400 to-pink-400" 
                        : "bg-gradient-to-br from-blue-400 to-cyan-400"
                    } shadow-md text-white`}>
                      {item.type === "image" ? <ImageIcon className="w-5 h-5" /> : <Type className="w-5 h-5" />}
                    </div>

                    <div className="flex-1 min-w-0">
                      <p className="text-gray-900 dark:text-gray-100 font-medium mb-1 line-clamp-2 text-sm sm:text-base">
                        {item.question || (item.type === "image" ? t("dashboard.image_question") : t("dashboard.text_question"))}
                      </p>
                      <div className="flex items-center gap-3 text-xs text-muted-foreground">
                        <div className="flex items-center gap-1">
                          <Clock className="w-3 h-3" />
                          <span>
                            {formatDistanceToNow(item.timestamp, { 
                              addSuffix: true, 
                              locale: language === 'ko' ? ko : enUS 
                            })}
                          </span>
                        </div>
                      </div>
                    </div>

                    <div className="flex flex-col items-end gap-2">
                      <ChevronRight className="w-5 h-5 text-gray-300 group-hover:text-primary transition-colors" />
                      <button 
                        onClick={(e) => handleDelete(e, item.id)}
                        className="p-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-300 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100"
                        title="ì‚­ì œ"
                      >
                        <Trash2 className="w-4 h-4" />
                      </button>
                    </div>
                  </div>
                </div>
              </motion.div>
            ))}
          </AnimatePresence>
        )}
      </div>

      <motion.button
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        whileHover={{ scale: 1.1 }}
        whileTap={{ scale: 0.95 }}
        onClick={() => onNavigate()}
        className="fixed bottom-8 right-8 w-16 h-16 rounded-full bg-gradient-to-br from-primary to-accent shadow-lg shadow-primary/40 flex items-center justify-center text-white z-50 hover:shadow-xl hover:shadow-primary/50 transition-shadow"
      >
        <Plus className="w-7 h-7" />
      </motion.button>
    </div>
  );
}
</file>

<file path="src/app/components/login-screen.tsx">
import { useState } from "react";
import { motion, AnimatePresence } from "motion/react";
import { Key, ArrowRight, Layers, Mail, Github, ChevronLeft, Lock } from "lucide-react";
import { useLanguage } from "@/app/components/language-context";
import { LanguageToggle } from "@/app/components/language-toggle";
import { Storage } from "@/lib/storage";
import { Input } from "@/app/components/ui/input";
import { Button } from "@/app/components/ui/button";
import { Toaster, toast } from "sonner";
import { signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "firebase/auth";
import { auth, googleProvider, githubProvider } from "@/lib/firebase";

interface LoginScreenProps {
  onLogin: () => void;
}

type LoginStep = "menu" | "email_input" | "api_key_input";

export function LoginScreen({ onLogin }: LoginScreenProps) {
  const { t } = useLanguage();
  const [step, setStep] = useState<LoginStep>("menu");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [apiKey, setApiKey] = useState("");
  const [isLoading, setIsLoading] = useState(false);

  const handleSocialLogin = async (provider: any, providerName: string) => {
    try {
      await signInWithPopup(auth, provider);
      toast.success(`${providerName} ${t("login.success") || 'Login Success'}`);
      checkApiKeyAndProceed();
    } catch (error: any) {
      if (error.code !== 'auth/popup-closed-by-user') {
        toast.error(`Login error: ${error.message}`);
      }
    }
  };

  const handleEmailAuth = async () => {
    if (!email || !password) {
      toast.error(t("login.email_error") || "Please enter email and password.");
      return;
    }
    setIsLoading(true);
    try {
      await signInWithEmailAndPassword(auth, email, password);
      checkApiKeyAndProceed();
    } catch (error: any) {
      if (error.code === 'auth/user-not-found' || error.code === 'auth/invalid-credential') {
        try {
          await createUserWithEmailAndPassword(auth, email, password);
          checkApiKeyAndProceed();
        } catch (signUpError: any) {
          toast.error("Auth error: " + signUpError.message);
        }
      } else {
        toast.error("Error: " + error.message);
      }
    } finally {
      setIsLoading(false);
    }
  };

  const checkApiKeyAndProceed = () => {
    const savedKey = Storage.getApiKey();
    if (savedKey) {
      setTimeout(() => onLogin(), 500);
    } else {
      setStep("api_key_input");
    }
  };

  const handleApiKeySave = () => {
    if (!apiKey.trim()) {
      toast.error("API Key is required.");
      return;
    }
    Storage.setApiKey(apiKey);
    setTimeout(() => onLogin(), 500);
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: { opacity: 1, transition: { staggerChildren: 0.1, delayChildren: 0.2 } },
    exit: { opacity: 0, y: -20, transition: { duration: 0.2 } }
  };
  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0, transition: { type: "spring", stiffness: 300, damping: 24 } },
  };

  return (
    <div className="min-h-screen flex items-center justify-center p-6 bg-[#fafbfc] dark:bg-[#030213] relative overflow-hidden text-gray-900 dark:text-white">
      <Toaster position="top-center" />
      <div className="fixed top-6 right-6 z-50">
        <LanguageToggle />
      </div>

      <div className="w-full max-w-md z-10">
        <AnimatePresence mode="wait">
          
          {step === "menu" && (
            <motion.div key="menu" variants={containerVariants} initial="hidden" animate="visible" exit="exit" className="flex flex-col items-center">
              <motion.div variants={itemVariants} className="text-center mb-12">
                <div className="inline-flex items-center justify-center w-24 h-24 rounded-[32px] bg-gradient-to-br from-blue-400 to-blue-600 shadow-xl shadow-blue-500/20 mb-6">
                  <Layers className="w-12 h-12 text-white" />
                </div>
                <h1 className="text-4xl mb-3 tracking-tight font-bold">{t("login.title")}</h1>
                <p className="text-gray-500 dark:text-gray-400 text-base">{t("login.subtitle")}</p>
              </motion.div>

              <motion.div variants={itemVariants} className="w-full space-y-4">
                {/* ğŸŸ¢ ìˆ˜ì •ë¨: êµ¬ê¸€ ë¡œê³  SVG ì§ì ‘ ì‚½ì… */}
                <button onClick={() => handleSocialLogin(googleProvider, "Google")} className="w-full h-14 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl flex items-center justify-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all shadow-sm group">
                  <svg className="w-5 h-5" viewBox="0 0 24 24">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" />
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" />
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" />
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" />
                  </svg>
                  <span className="font-medium text-gray-700 dark:text-gray-200">{t("login.google")}</span>
                </button>

                <button onClick={() => handleSocialLogin(githubProvider, "GitHub")} className="w-full h-14 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl flex items-center justify-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all shadow-sm">
                  <Github className="w-5 h-5 text-gray-900 dark:text-white" />
                  <span className="font-medium text-gray-700 dark:text-gray-200">{t("login.github")}</span>
                </button>

                <div className="relative py-2 text-center text-xs text-gray-400 font-medium">{t("login.or")}</div>

                <motion.button whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} onClick={() => setStep("email_input")} className="w-full h-14 bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center gap-3 text-white shadow-lg shadow-blue-500/30 transition-all">
                  <Mail className="w-5 h-5" />
                  <span className="font-bold">{t("login.email")}</span>
                </motion.button>
              </motion.div>
              
              <motion.p variants={itemVariants} className="mt-8 text-[11px] text-center text-gray-400 leading-relaxed max-w-xs px-4">
                {t("login.terms")}<span className="text-blue-500 cursor-pointer hover:underline">{t("login.terms.link1")}</span>{t("login.terms.and")}<span className="text-blue-500 cursor-pointer hover:underline">{t("login.terms.link2")}</span>{t("login.terms.agree")}
              </motion.p>
            </motion.div>
          )}

          {step === "email_input" && (
            <motion.div key="email" initial={{ opacity: 0, x: 50 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 50 }} className="w-full">
              <div className="bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-[32px] p-8 border border-white/50 dark:border-gray-800 shadow-xl">
                <button onClick={() => setStep("menu")} className="mb-6 p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                  <ChevronLeft className="w-6 h-6 text-gray-500" />
                </button>
                <div className="text-center mb-8">
                  <h2 className="text-2xl font-bold mb-2">{t("login.email")}</h2>
                  <p className="text-sm text-gray-500">Enter your credentials</p>
                </div>
                <div className="space-y-4">
                  <Input type="email" placeholder="Email" className="h-14 rounded-2xl" value={email} onChange={(e) => setEmail(e.target.value)} />
                  <Input type="password" placeholder="Password" className="h-14 rounded-2xl" value={password} onChange={(e) => setPassword(e.target.value)} />
                  <Button onClick={handleEmailAuth} disabled={isLoading} className="w-full h-14 rounded-2xl bg-blue-600 text-white font-bold">
                    {isLoading ? "..." : t("login.email")}
                  </Button>
                </div>
              </div>
            </motion.div>
          )}

          {step === "api_key_input" && (
            <motion.div key="api" initial={{ opacity: 0, x: 50 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 50 }} className="w-full">
              <div className="bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-[32px] p-8 border border-white/50 dark:border-gray-800 shadow-xl">
                <div className="text-center mb-8">
                  <h2 className="text-2xl font-bold mb-2">Gemini API Key</h2>
                  <p className="text-sm text-gray-500">Please enter your API Key to start</p>
                </div>
                <div className="space-y-6">
                  <Input type="password" placeholder="AIzaSy..." className="h-14 rounded-2xl" value={apiKey} onChange={(e) => setApiKey(e.target.value)} onKeyDown={(e) => e.key === "Enter" && handleApiKeySave()} />
                  <Button onClick={handleApiKeySave} className="w-full h-14 rounded-2xl bg-blue-600 text-white font-bold">
                    Start SolveWise
                  </Button>
                </div>
              </div>
            </motion.div>
          )}

        </AnimatePresence>
      </div>
    </div>
  );
}
</file>

<file path="src/app/components/solver-screen.tsx">
import { useState, useEffect, useRef } from "react";
import { motion, AnimatePresence } from "motion/react";
import { ArrowLeft, Camera, Send, Sparkles, X, BarChart2, Wand2, Cpu } from "lucide-react";
import { useLanguage } from "@/app/components/language-context";
import { callGemini, resizeImage, checkCurrentModel, INITIAL_PROMPT, GRAPH_PROMPT } from "@/lib/gemini";
import { Storage, HistoryItem } from "@/lib/storage";
import ReactMarkdown from "react-markdown";
import remarkMath from "remark-math";
import rehypeKatex from "rehype-katex";
import { Toaster, toast } from "sonner";

declare global {
  interface Window {
    Plotly: any;
  }
}

interface SolverScreenProps {
  onBack: () => void;
  initialHistory: HistoryItem | null;
}

interface ParsedSection {
  title: string;
  content: string;
}

interface ChatMessage {
  id: string;
  role: 'user' | 'ai';
  text?: string;
  image?: string;
  result?: { explanation: string; graphCode: string };
}

export function SolverScreen({ onBack, initialHistory }: SolverScreenProps) {
  const { t } = useLanguage();
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [isProcessing, setIsProcessing] = useState(false);
  const [graphLoadingId, setGraphLoadingId] = useState<string | null>(null);
  const [showGraph, setShowGraph] = useState(false);
  const [progress, setProgress] = useState(0);
  const [currentModel, setCurrentModel] = useState<string>("");
  
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (initialHistory) {
      setMessages([
        {
          id: 'restored-user',
          role: 'user',
          text: initialHistory.question,
          image: initialHistory.previewImage,
        },
        {
          id: 'restored-ai',
          role: 'ai',
          result: {
            explanation: initialHistory.answer,
            graphCode: initialHistory.graphCode || "",
          },
        }
      ]);
    } else {
      setMessages([]);
    }
  }, [initialHistory]);

  useEffect(() => {
    if (scrollRef.current) {
      scrollRef.current.scrollIntoView({ behavior: "smooth" });
    }
  }, [messages, isProcessing, graphLoadingId, showGraph]);

  useEffect(() => {
    const apiKey = Storage.getApiKey();
    if (apiKey) {
      checkCurrentModel(apiKey).then(modelName => {
        setCurrentModel(modelName);
      });
    }
  }, []);

  useEffect(() => {
    let interval: NodeJS.Timeout;
    if (isProcessing) {
      setProgress(0);
      interval = setInterval(() => {
        setProgress((prev) => {
          const target = 99;
          const remaining = target - prev;
          const increment = Math.max(0.05, remaining * 0.05); 
          const randomFactor = Math.random() * 0.5; 
          return Math.min(target, prev + increment + randomFactor);
        });
      }, 200);
    } else {
      setProgress(100);
    }
    return () => clearInterval(interval);
  }, [isProcessing]);

  const parseResponse = (text: string): ParsedSection[] => {
    const regex = /\*\*(\d+)\.\s(.*?)\*\*/g;
    const sections: ParsedSection[] = [];
    let lastIndex = 0;
    let match;

    while ((match = regex.exec(text)) !== null) {
      if (sections.length > 0) {
        sections[sections.length - 1].content = text.substring(lastIndex, match.index).trim();
      }
      sections.push({ title: match[2], content: "" });
      lastIndex = regex.lastIndex;
    }
    if (sections.length > 0) {
      sections[sections.length - 1].content = text.substring(lastIndex).trim();
    }
    return sections;
  };

  const handleSend = async (inputText: string, imageFile: File | null, imageBase64: string | null) => {
    const apiKey = Storage.getApiKey();
    if (!apiKey) {
      toast.error(t("solver.error_no_key"));
      return;
    }

    const newUserMsg: ChatMessage = {
      id: Date.now().toString(),
      role: 'user',
      text: inputText,
      image: imageBase64 || undefined
    };
    setMessages(prev => [...prev, newUserMsg]);
    setIsProcessing(true);
    setShowGraph(false);

    try {
      let base64ForApi = null;
      if (imageFile) {
        base64ForApi = await resizeImage(imageFile);
      }

      let context = "";
      if (messages.length > 0) {
        context = "\n\n[ì´ì „ ëŒ€í™” ê¸°ë¡ (ì°¸ê³ ìš©)]:\n" + messages.map(m => 
          `${m.role === 'user' ? 'Q' : 'A'}: ${m.text || (m.result ? 'í’€ì´ ì™„ë£Œ' : 'ì´ë¯¸ì§€')}`
        ).join("\n");
      }

      const promptText = `${INITIAL_PROMPT}${context}\n\n[í˜„ì¬ ì§ˆë¬¸]: ${inputText || "ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”."}`;
      
      const data = await callGemini(apiKey, promptText, base64ForApi);

      const newAiMsg: ChatMessage = {
        id: (Date.now() + 1).toString(),
        role: 'ai',
        result: data
      };
      setMessages(prev => [...prev, newAiMsg]);

      if (messages.length === 0) {
        Storage.addHistory({
          id: Date.now().toString(),
          type: imageFile ? "image" : "text",
          question: inputText || t("dashboard.image_question"),
          answer: data.explanation,
          graphCode: data.graphCode,
          timestamp: Date.now(),
          previewImage: base64ForApi ? `data:image/jpeg;base64,${base64ForApi}` : undefined
        });
      }

    } catch (error: any) {
      console.error(error);
      toast.error("ì˜¤ë¥˜: " + error.message);
    } finally {
      setIsProcessing(false);
    }
  };

  const handleGenerateGraph = async (messageId: string, explanation: string) => {
    const apiKey = Storage.getApiKey();
    if (!apiKey) return;

    setGraphLoadingId(messageId);
    
    try {
      const prompt = `${GRAPH_PROMPT}\n\n[ë¬¸ì œ í’€ì´ ë‚´ìš©]:\n${explanation}`;
      const data = await callGemini(apiKey, prompt, null);

      if (data.graphCode) {
        setMessages(prev => prev.map(msg => {
          if (msg.id === messageId && msg.result) {
            return {
              ...msg,
              result: {
                ...msg.result,
                graphCode: data.graphCode
              }
            };
          }
          return msg;
        }));
        setShowGraph(true);
        toast.success(t("solver.graph_success"));
      } else {
        toast.error(t("solver.graph_error"));
      }
    } catch (error: any) {
      toast.error("ì˜¤ë¥˜: " + error.message);
    } finally {
      setGraphLoadingId(null);
    }
  };

  useEffect(() => {
    const lastMsg = messages[messages.length - 1];
    if (showGraph && lastMsg?.role === 'ai' && lastMsg.result?.graphCode && window.Plotly) {
      try {
        const runGraph = new Function(lastMsg.result.graphCode);
        runGraph();
        window.addEventListener('resize', () => window.Plotly.Plots.resize('chart'));
        return () => window.removeEventListener('resize', () => window.Plotly.Plots.resize('chart'));
      } catch (e) {
        console.error("Graph Error:", e);
      }
    }
  }, [showGraph, messages]);

  return (
    <div className="min-h-screen flex flex-col bg-[#fafbfc] dark:bg-[#030213]">
      <Toaster position="top-center" />

      <motion.div
        initial={{ opacity: 0, y: -20 }}
        animate={{ opacity: 1, y: 0 }}
        className="sticky top-0 z-10 backdrop-blur-xl bg-white/80 dark:bg-black/80 border-b border-gray-200/50 dark:border-gray-800/50 px-6 py-4"
      >
        <div className="max-w-2xl mx-auto flex items-center gap-4">
          <motion.button
            whileHover={{ scale: 1.05, x: -2 }}
            whileTap={{ scale: 0.95 }}
            onClick={onBack}
            className="w-10 h-10 rounded-[14px] bg-white/50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-white dark:hover:bg-gray-700 transition-all shrink-0"
          >
            <ArrowLeft className="w-5 h-5 text-gray-700 dark:text-gray-300" />
          </motion.button>
          
          <div className="flex-1 min-w-0">
            <h2 className="tracking-tight font-bold text-gray-900 dark:text-white truncate">
              {t("solver.title")}
            </h2>
            <p className="text-xs text-muted-foreground truncate">
              {t("solver.subtitle")}
            </p>
          </div>

          <div className="ml-auto flex items-center gap-1.5 px-3 py-1.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-xl text-xs font-bold border border-emerald-200 dark:border-emerald-800 shadow-sm whitespace-nowrap">
            <Cpu className="w-3.5 h-3.5" />
            <span>{currentModel || "Loading..."}</span>
          </div>
          
        </div>
      </motion.div>

      <div className="flex-1 overflow-y-auto pb-10">
        <div className="max-w-2xl mx-auto px-6 py-8 space-y-8">
          
          <AnimatePresence mode="wait">
            {messages.length === 0 && (
              <motion.div
                key="initial-input"
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, y: -50, scale: 0.9 }}
                transition={{ duration: 0.4, ease: "easeInOut" }}
                className="mt-10"
              >
                <InputCard onSend={handleSend} isProcessing={isProcessing} />
              </motion.div>
            )}
          </AnimatePresence>

          <div className="space-y-8">
            {messages.map((msg, index) => (
              <motion.div
                key={msg.id}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                className={`flex flex-col ${msg.role === 'user' ? 'items-end' : 'items-start'}`}
              >
                {msg.role === 'user' && (
                  <div className="max-w-[90%]">
                    {msg.image && (
                      <img src={msg.image} alt="User upload" className="w-48 rounded-2xl mb-2 border border-gray-200 dark:border-gray-700 ml-auto" />
                    )}
                    {msg.text && (
                      <div className="bg-primary text-white px-5 py-3 rounded-2xl rounded-tr-sm shadow-md text-sm sm:text-base">
                        {msg.text}
                      </div>
                    )}
                  </div>
                )}

                {msg.role === 'ai' && msg.result && (
                  <div className="w-full space-y-6">
                    {parseResponse(msg.result.explanation).map((section, idx) => (
                      <ResultCard key={idx} section={section} index={idx} />
                    ))}

                    <div className="flex flex-col gap-4">
                      <div className="flex justify-end">
                        {msg.result.graphCode ? (
                          <button
                            onClick={() => setShowGraph(!showGraph)}
                            className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-sm ${
                              showGraph 
                                ? "bg-primary text-white shadow-primary/30" 
                                : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50"
                            }`}
                          >
                            <BarChart2 className="w-4 h-4" />
                            {showGraph ? t("solver.graph_hide") : t("solver.graph_view")}
                          </button>
                        ) : (
                          <button
                            onClick={() => handleGenerateGraph(msg.id, msg.result!.explanation)}
                            disabled={graphLoadingId === msg.id}
                            className="flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800 hover:bg-emerald-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {graphLoadingId === msg.id ? (
                              <>
                                <Sparkles className="w-4 h-4 animate-spin" />
                                <span>{t("solver.graph_creating")}</span>
                              </>
                            ) : (
                              <>
                                <Wand2 className="w-4 h-4" />
                                <span>{t("solver.graph_create")}</span>
                              </>
                            )}
                          </button>
                        )}
                      </div>

                      <AnimatePresence>
                        {showGraph && msg.result.graphCode && (
                          <motion.div
                            initial={{ opacity: 0, height: 0 }}
                            animate={{ opacity: 1, height: "auto" }}
                            exit={{ opacity: 0, height: 0 }}
                            className="bg-white dark:bg-gray-900 rounded-[32px] p-4 border border-gray-200 dark:border-gray-800 shadow-lg overflow-hidden"
                          >
                            <div id="chart" className="w-full h-[400px]" />
                          </motion.div>
                        )}
                      </AnimatePresence>
                    </div>

                  </div>
                )}
              </motion.div>
            ))}

            {isProcessing && (
              <motion.div
                initial={{ opacity: 0, y: 10 }}
                animate={{ opacity: 1, y: 0 }}
                className="flex flex-col gap-3 max-w-[240px]"
              >
                <div className="flex items-center gap-3 text-gray-700 dark:text-gray-300">
                  <div className="w-8 h-8 rounded-full bg-white dark:bg-gray-800 flex items-center justify-center shadow-sm border border-gray-100 dark:border-gray-700">
                    <Sparkles className="w-4 h-4 animate-pulse text-primary" />
                  </div>
                  <span className="text-sm font-bold">{t("solver.solving")}</span>
                  <span className="text-xs text-muted-foreground ml-auto">{Math.round(progress)}%</span>
                </div>
                
                <div className="h-1.5 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden">
                  <motion.div 
                    className="h-full bg-gradient-to-r from-primary to-blue-400 rounded-full"
                    initial={{ width: 0 }}
                    animate={{ width: `${progress}%` }}
                    transition={{ ease: "easeOut" }}
                  />
                </div>
              </motion.div>
            )}
            
            <div ref={scrollRef} />
          </div>

          <AnimatePresence>
            {messages.length > 0 && !isProcessing && (
              <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.2 }}
                className="pt-4"
              >
                <div className="flex items-center gap-2 mb-2 px-2">
                  <Sparkles className="w-4 h-4 text-primary" />
                  <span className="text-sm font-bold text-primary">{t("solver.add_question")}</span>
                </div>
                <InputCard onSend={handleSend} isProcessing={isProcessing} isCompact={true} />
              </motion.div>
            )}
          </AnimatePresence>

        </div>
      </div>
    </div>
  );
}

function InputCard({ onSend, isProcessing, isCompact = false }: { 
  onSend: (text: string, file: File | null, base64: string | null) => void, 
  isProcessing: boolean,
  isCompact?: boolean 
}) {
  const { t } = useLanguage();
  const [text, setText] = useState("");
  const [image, setImage] = useState<string | null>(null);
  const [file, setFile] = useState<File | null>(null);

  const handleUpload = (e: React.ChangeEvent<HTMLInputElement>) => {
    const f = e.target.files?.[0];
    if (f) {
      setFile(f);
      const reader = new FileReader();
      reader.onloadend = () => setImage(reader.result as string);
      reader.readAsDataURL(f);
    }
  };

  const handleSubmit = () => {
    if (!text.trim() && !file) return;
    onSend(text, file, image);
    setText("");
    setImage(null);
    setFile(null);
  };

  return (
    <div className={`bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-[32px] border border-white/50 dark:border-gray-800 shadow-sm transition-all ${isCompact ? 'p-4' : 'p-6'}`}>
      <AnimatePresence>
        {image && (
          <motion.div
            initial={{ opacity: 0, height: 0 }}
            animate={{ opacity: 1, height: "auto" }}
            exit={{ opacity: 0, height: 0 }}
            className="mb-4 relative"
          >
            <div className="relative rounded-[20px] overflow-hidden border border-gray-200 dark:border-gray-700 inline-block">
              <img src={image} alt="Preview" className="max-h-40 object-contain bg-gray-50 dark:bg-black" />
              <button
                onClick={() => { setImage(null); setFile(null); }}
                className="absolute top-2 right-2 w-6 h-6 bg-black/50 hover:bg-red-500 text-white rounded-full flex items-center justify-center backdrop-blur-md transition-colors"
              >
                <X className="w-3 h-3" />
              </button>
            </div>
          </motion.div>
        )}
      </AnimatePresence>

      <textarea
        value={text}
        onChange={(e) => setText(e.target.value)}
        placeholder={isCompact ? t("solver.placeholder") : t("solver.placeholder")}
        className={`w-full bg-transparent resize-none outline-none text-gray-900 dark:text-gray-100 placeholder:text-gray-400 text-base ${isCompact ? 'min-h-[60px]' : 'min-h-[100px]'}`}
        onKeyDown={(e) => {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            handleSubmit();
          }
        }}
      />

      <div className="flex items-center justify-between mt-2 pt-2 border-t border-gray-100 dark:border-gray-800">
        <label className="cursor-pointer group">
          <input type="file" accept="image/*" onChange={handleUpload} className="hidden" />
          <div className="flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 group-hover:bg-gray-200 dark:group-hover:bg-gray-700 rounded-[16px] transition-colors">
            <Camera className="w-4 h-4 text-gray-600 dark:text-gray-300" />
            {!isCompact && <span className="text-sm font-medium text-gray-600 dark:text-gray-300">{t("solver.upload")}</span>}
          </div>
        </label>

        <motion.button
          whileHover={{ scale: 1.05 }}
          whileTap={{ scale: 0.95 }}
          onClick={handleSubmit}
          disabled={isProcessing || (!text.trim() && !image)}
          className="flex items-center gap-2 px-5 py-2 bg-gradient-to-br from-primary to-accent rounded-[16px] text-white shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all"
        >
          {isProcessing ? (
            <Sparkles className="w-4 h-4 animate-spin" />
          ) : (
            <>
              <Send className="w-4 h-4" />
              {!isCompact && <span className="text-sm font-bold">{t("solver.solve")}</span>}
            </>
          )}
        </motion.button>
      </div>
    </div>
  );
}

function ResultCard({ section, index }: { section: ParsedSection, index: number }) {
  if (section.title.includes("ì‚¬ìš©ëœ ê°œë…")) {
    const concepts = section.content.split(/,|ã€/).map(c => c.trim()).filter(c => c);
    return (
      <motion.div
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: index * 0.1 }}
        className="bg-white dark:bg-gray-900 rounded-[24px] p-6 border border-gray-100 dark:border-gray-800 shadow-sm"
      >
        <h3 className="text-lg font-bold text-primary mb-4 flex items-center gap-2">
          <span className="w-1 h-6 bg-primary rounded-full"/>
          {section.title}
        </h3>
        <div className="flex flex-wrap gap-2">
          {concepts.map((concept, i) => (
            <span key={i} className="px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 rounded-full text-sm font-medium border border-blue-100 dark:border-blue-800">
              {concept}
            </span>
          ))}
        </div>
      </motion.div>
    );
  }

  if (section.title.includes("ìµœì¢… ì •ë‹µ") || section.title.includes("ì •ë‹µ")) {
    return (
      <motion.div
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: index * 0.1 }}
        className="bg-gradient-to-br from-primary/10 to-accent/10 dark:from-primary/20 dark:to-accent/20 rounded-[24px] p-6 border border-primary/20 dark:border-primary/30 shadow-sm"
      >
        <h3 className="text-lg font-bold text-primary mb-2 flex items-center gap-2">
          <Sparkles className="w-5 h-5" />
          {section.title}
        </h3>
        <div className="text-xl font-bold text-gray-900 dark:text-white pl-1">
          <ReactMarkdown remarkPlugins={[remarkMath]} rehypePlugins={[rehypeKatex]}>
            {section.content}
          </ReactMarkdown>
        </div>
      </motion.div>
    );
  }

  if (section.title.includes("í’€ì´") || section.title.includes("ê³¼ì •")) {
    return (
      <motion.div
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: index * 0.1 }}
        className="bg-white dark:bg-gray-900 rounded-[24px] p-6 border border-gray-100 dark:border-gray-800 shadow-sm"
      >
        <h3 className="text-lg font-bold text-primary mb-6 flex items-center gap-2">
          <span className="w-1 h-6 bg-primary rounded-full"/>
          {section.title}
        </h3>
        
        <div className="prose dark:prose-invert max-w-none">
          <ReactMarkdown 
            remarkPlugins={[remarkMath]} 
            rehypePlugins={[rehypeKatex]}
            components={{
              h3: ({node, ...props}) => (
                <div className="mt-8 mb-4 flex items-center gap-3 pb-2 border-b border-gray-100 dark:border-gray-800">
                  <span className="bg-primary/10 text-primary px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider">STEP</span>
                  <h3 className="text-lg font-bold text-gray-800 dark:text-gray-100 m-0" {...props} />
                </div>
              ),
              p: ({node, ...props}) => (
                <p className="mb-4 leading-loose text-gray-600 dark:text-gray-300 text-[15px]" {...props} />
              ),
              strong: ({node, ...props}) => (
                <strong className="text-primary font-bold bg-primary/5 px-1 rounded" {...props} />
              ),
              ul: ({node, ...props}) => (
                <ul className="list-disc pl-5 space-y-2 mb-4 text-gray-600 dark:text-gray-300" {...props} />
              ),
              li: ({node, ...props}) => (
                <li className="leading-relaxed" {...props} />
              )
            }}
          >
            {section.content}
          </ReactMarkdown>
        </div>
      </motion.div>
    );
  }

  return (
    <motion.div
      initial={{ opacity: 0, y: 10 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: index * 0.1 }}
      className="bg-white dark:bg-gray-900 rounded-[24px] p-6 border border-gray-100 dark:border-gray-800 shadow-sm"
    >
      <h3 className="text-lg font-bold text-primary mb-3 flex items-center gap-2">
        <span className="w-1 h-6 bg-gray-200 dark:bg-gray-700 rounded-full"/>
        {section.title}
      </h3>
      <div className="prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 leading-relaxed">
        <ReactMarkdown remarkPlugins={[remarkMath]} rehypePlugins={[rehypeKatex]}>
          {section.content}
        </ReactMarkdown>
      </div>
    </motion.div>
  );
}
</file>

</files>
